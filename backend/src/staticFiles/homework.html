<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homework Page</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Welcome to the Homework Page</h1>
    </header>
    <main>
        <section id="setHomeWork">
            <h2>Homework Assignments</h2>
            <div id="homeworkList">
                <h2>Please select the subject, and add the answers to your questions</h2>
                <form id="homeworkForm">
                    <label for="subject">Subject:</label>
                    <select id="subject" name="subject">
                        <option value="math">Math</option>
                        <option value="science">Science</option>
                        <option value="history">History</option>
                        <option value="literature">Literature</option>
                    </select>
                    <br><br>
                    <label for="dueDate">Due Date:</label>
                    <input type="date" id="dueDate" name="timeStamp" required>
                    <br><br>
                    <label for="teacherID">Teacher ID:</label>
                    <input type="text" id="teacherID" name="teacherId" required>
                    <br><br>
                    <label for="question1">Question 1:</label>
                    <input type="text" id="question1" name="AnswerOne" required>
                    <br><br>
                    <label for="question2">Question 2:</label>
                    <input type="text" id="question2" name="AnswerTwo" required>
                    <br><br>
                    <label for="question3">Question 3:</label>
                    <input type="text" id="question3" name="AnswerThree" required>
                    <br><br>
                    <label for="question4">Question 4:</label>
                    <input type="text" id="question4" name="AnswerFour" required>
                    <br><br>
                    <label for="question5">Question 5:</label>
                    <input type="text" id="question5" name="AnswerFive" required>
                    <br><br>
                    <button type="submit">Submit Homework</button>
                </form>
            </div>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 Homework Portal</p>
    </footer>
<script>
    
document.getElementById('homeworkForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const form = e.target;
    const token = localStorage.getItem("token");
    const payload = {
        subject: form.subject.value,
        timeStamp: form.timeStamp.value,
        AnswerOne: form.AnswerOne.value,
        AnswerTwo: form.AnswerTwo.value,
        AnswerThree: form.AnswerThree.value,
        AnswerFour: form.AnswerFour.value,
        AnswerFive: form.AnswerFive.value
    };

    try {
        const res = await fetch('http://localhost:3000/homework', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json',"Authorization": `Bearer ${token}` },
            body: JSON.stringify(payload)
        });

        if (res.ok) {
            // Redirect to your next page
            window.location.href = "multipleChoice.html";
        } else {
            alert("Error saving homework");
        }

    } catch (error) {
        console.error("Request failed:", error);
        alert("Unable to connect to server");
    }
});
</script>
</body> 
</html>